export async function GetServerList(client, Length) {
  const ServerList = {
    code: null,
    message: null,
    List: [],
    total: null,
  };
  try {
    const Response = await client.doRequest(
      client.x19Session.releaseInfoPE.WebServerUrl,
      "/rental-server/query/available-by-sort-type",
      { body: { offset: Length, sort_type: 0 } }
    );
    if (Response.entities == "") {
      ServerList.code = 16;
      ServerList.message = "未获取到服务器";
      return ServerList;
    }
    ServerList.code = Response.code;
    ServerList.message = Response.message;
    ServerList.total = Response.total;
    for (const key in Response.entities) {
      ServerList.List[key] = {
        Name: Response.entities[key].name,
        ID: Response.entities[key].entity_id,
        Owner_ID: Response.entities[key].owner_id,
        HavePassword: Boolean(Number(Response.entities[key].has_pwd))
          ? true
          : false,
      };
    }
  } catch (error) {
    if (error.errorCode === "HTTP_REQUEST_FAILED") {
      if (error.response.code === 10 && error.response.message === "请先登录") {
        ServerList.code = error.response.code;
        ServerList.message = error.response.message;
      }
    } else if (error.errorCode === "NETWORK_ERROR") {
      ServerList.code = 100001;
      ServerList.message = "网络异常";
    } else {
      console.error(error);
      throw error;
    }
  }
  return ServerList;
}

/*

{
  code: 0,
  message: '正常返回',
  details: '',
  entities: [
    {
      entity_id: '4662925510109685138',
      name: '20336404',
      owner_id: 2749538653,
      visibility: 0,
      status: 1,
      icon_index: 5,
      capacity: 20,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 16,
      server_type: 'docker',
      offset: 0,
      has_pwd: '0',
      image_url: '',
      world_id: 'mbhwpxajqc2whqbyds6zig',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666479643344227224',
      name: '54532888',
      owner_id: 2749538653,
      visibility: 0,
      status: 1,
      icon_index: 3,
      capacity: 40,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 5,
      server_type: 'docker',
      offset: 1,
      has_pwd: '0',
      image_url: '',
      world_id: 'ztcwbmihqumvxwdw8wvs1q',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666597422747930304',
      name: '97039709',
      owner_id: 2749538653,
      visibility: 0,
      status: 1,
      icon_index: 4,
      capacity: 20,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 2,
      server_type: 'docker',
      offset: 2,
      has_pwd: '0',
      image_url: '',
      world_id: 'njmfkbesqbyfkw22ngzkiw',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666178876853453669',
      name: '56772922',
      owner_id: 2749543424,
      visibility: 0,
      status: 1,
      icon_index: 3,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 1,
      server_type: 'docker',
      offset: 3,
      has_pwd: '1',
      image_url: '',
      world_id: 'aw4efhcuqhujvqid30xoza',
      min_level: 1,
      pvp: true
    },
    {
      entity_id: '4665833849834473139',
      name: '51049377',
      owner_id: 2749573073,
      visibility: 0,
      status: 1,
      icon_index: 5,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 4,
      server_type: 'docker',
      offset: 4,
      has_pwd: '0',
      image_url: '',
      world_id: 'oekbsvftsjyad9al83ga2q',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4664676348826368605',
      name: '25698112',
      owner_id: 2749580988,
      visibility: 0,
      status: 1,
      icon_index: 4,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 1,
      like_num: 8,
      server_type: 'docker',
      offset: 5,
      has_pwd: '1',
      image_url: '',
      world_id: 'jckj2gzjrk1rvgmihltryg',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666155950690849545',
      name: '70716925',
      owner_id: 2749674098,
      visibility: 0,
      status: 1,
      icon_index: 1,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 6,
      server_type: 'docker',
      offset: 6,
      has_pwd: '1',
      image_url: '',
      world_id: 'xancerlarbue6ns0iksepq',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4665780780324438356',
      name: '29635905',
      owner_id: 2749699070,
      visibility: 0,
      status: 1,
      icon_index: 2,
      capacity: 20,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 4,
      server_type: 'docker',
      offset: 7,
      has_pwd: '0',
      image_url: '',
      world_id: 'ohau6b71rhgqw3ae7g2pxa',
      min_level: 0,
      pvp: false
    },
    {
      entity_id: '4666335259780172482',
      name: '99475661',
      owner_id: 2749736521,
      visibility: 0,
      status: 1,
      icon_index: 5,
      capacity: 40,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 9,
      server_type: 'docker',
      offset: 8,
      has_pwd: '0',
      image_url: '',
      world_id: 'whxduopmqdwwak8nk2vfxg',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4665933989231122319',
      name: '66734595',
      owner_id: 2749762138,
      visibility: 0,
      status: 1,
      icon_index: 1,
      capacity: 20,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 20,
      server_type: 'docker',
      offset: 9,
      has_pwd: '0',
      image_url: '',
      world_id: '5xkvlzwotumx4hcgie1xaa',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666555170283506345',
      name: '10623998',
      owner_id: 2749768559,
      visibility: 0,
      status: 1,
      icon_index: 1,
      capacity: 20,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 2,
      server_type: 'docker',
      offset: 10,
      has_pwd: '0',
      image_url: '',
      world_id: 'ss080kqgtvmuptu9ldpaaq',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666456607036384682',
      name: '57067697',
      owner_id: 2749791850,
      visibility: 0,
      status: 1,
      icon_index: 3,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 4,
      server_type: 'docker',
      offset: 11,
      has_pwd: '1',
      image_url: '',
      world_id: 'vndgdqijskc3glajscn3yq',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666160196671418760',
      name: '100977',
      owner_id: 2749813603,
      visibility: 0,
      status: 1,
      icon_index: 5,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 4,
      server_type: 'docker',
      offset: 12,
      has_pwd: '0',
      image_url: '',
      world_id: 'axrrsklvtugzd7ipcanjxg',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4665091926103927654',
      name: '11239474',
      owner_id: 2749821153,
      visibility: 0,
      status: 1,
      icon_index: 5,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 2,
      like_num: 53,
      server_type: 'docker',
      offset: 13,
      has_pwd: '0',
      image_url: '',
      world_id: 'n1mrwu1hsw66vqzskpfncq',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666158051523109231',
      name: '20454768',
      owner_id: 2749836844,
      visibility: 0,
      status: 1,
      icon_index: 5,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 4,
      server_type: 'docker',
      offset: 14,
      has_pwd: '0',
      image_url: '',
      world_id: 'boyspqjlsfynjujwq871pg',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666382460432020708',
      name: '3404266',
      owner_id: 2749889159,
      visibility: 0,
      status: 1,
      icon_index: 2,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 3,
      server_type: 'docker',
      offset: 15,
      has_pwd: '0',
      image_url: '',
      world_id: 'bdhhh1bxs3ykj0xuvfzvbg',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4665670406896728590',
      name: '4360676',
      owner_id: 2749896497,
      visibility: 0,
      status: 1,
      icon_index: 2,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 8,
      server_type: 'docker',
      offset: 16,
      has_pwd: '0',
      image_url: '',
      world_id: 'rcaovy21sak1u7g8tb5edq',
      min_level: 1,
      pvp: true
    },
    {
      entity_id: '4663939401802915033',
      name: '20452724',
      owner_id: 2749908993,
      visibility: 0,
      status: 1,
      icon_index: 5,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 44,
      server_type: 'docker',
      offset: 17,
      has_pwd: '0',
      image_url: '',
      world_id: 'vkamqlffr9gnzq1hwy1m5a',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4665344031549098905',
      name: '34060395',
      owner_id: 2749926005,
      visibility: 0,
      status: 1,
      icon_index: 1,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 39,
      server_type: 'docker',
      offset: 18,
      has_pwd: '0',
      image_url: '',
      world_id: '8j24fw6atwmoxypydslkkq',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666175470962759839',
      name: '18792263',
      owner_id: 2749941829,
      visibility: 0,
      status: 1,
      icon_index: 2,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 2,
      server_type: 'docker',
      offset: 19,
      has_pwd: '1',
      image_url: '',
      world_id: '3rhd4yqftyq3rbtjqpljwa',
      min_level: 0,
      pvp: false
    },
    {
      entity_id: '4666108805884579917',
      name: '21137769',
      owner_id: 2749982249,
      visibility: 0,
      status: 1,
      icon_index: 3,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 36,
      server_type: 'docker',
      offset: 20,
      has_pwd: '0',
      image_url: '',
      world_id: 'rt8wtfdmroc360fhryqkjq',
      min_level: 1,
      pvp: true
    },
    {
      entity_id: '4665403390804275601',
      name: '37996529',
      owner_id: 2750033648,
      visibility: 0,
      status: 1,
      icon_index: 4,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 3,
      like_num: 17,
      server_type: 'docker',
      offset: 21,
      has_pwd: '0',
      image_url: '',
      world_id: 'siom64f0q6yccwldwhgd1w',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666205094991672366',
      name: '96847624',
      owner_id: 2750055807,
      visibility: 0,
      status: 1,
      icon_index: 1,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 1,
      server_type: 'docker',
      offset: 22,
      has_pwd: '0',
      image_url: '',
      world_id: 'ophqxpftsxis2xxnpejyyq',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666220007382007349',
      name: '21248135',
      owner_id: 2750058346,
      visibility: 0,
      status: 1,
      icon_index: 1,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 1,
      server_type: 'docker',
      offset: 23,
      has_pwd: '0',
      image_url: '',
      world_id: 'whylh68rq3o5ugrw6ksyig',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666203183202478136',
      name: '61574074',
      owner_id: 2750076421,
      visibility: 0,
      status: 1,
      icon_index: 1,
      capacity: 20,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 2,
      server_type: 'docker',
      offset: 24,
      has_pwd: '1',
      image_url: '',
      world_id: 'ch8vmfdstl2w0ixdz7idtg',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4664150722279726347',
      name: '86186750',
      owner_id: 2750079894,
      visibility: 0,
      status: 1,
      icon_index: 5,
      capacity: 20,
      mc_version: '1.18.33-release',
      player_count: 4,
      like_num: 352,
      server_type: 'docker',
      offset: 25,
      has_pwd: '0',
      image_url: '',
      world_id: 'mxgcirkbqpcuvdjkjasweq',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4665072896442118704',
      name: '71819526',
      owner_id: 2750117310,
      visibility: 0,
      status: 1,
      icon_index: 3,
      capacity: 40,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 21,
      server_type: 'docker',
      offset: 26,
      has_pwd: '0',
      image_url: '',
      world_id: 'aje1vexqqd2hnjainxzieg',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4666663468156133240',
      name: '21900322',
      owner_id: 2750171417,
      visibility: 0,
      status: 1,
      icon_index: 1,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 0,
      server_type: 'docker',
      offset: 27,
      has_pwd: '0',
      image_url: '',
      world_id: '1gawqlr8rmmwzljidqr1ng',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4665847196094683624',
      name: '17891317',
      owner_id: 2750174902,
      visibility: 0,
      status: 1,
      icon_index: 1,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 7,
      server_type: 'docker',
      offset: 28,
      has_pwd: '0',
      image_url: '',
      world_id: 'bqocntuet1uxo4sakyoe9q',
      min_level: 0,
      pvp: true
    },
    {
      entity_id: '4665450418048752189',
      name: '91317157',
      owner_id: 2750181712,
      visibility: 0,
      status: 1,
      icon_index: 1,
      capacity: 10,
      mc_version: '1.18.33-release',
      player_count: 0,
      like_num: 24,
      server_type: 'docker',
      offset: 29,
      has_pwd: '0',
      image_url: '',
      world_id: '2opsaawgsdw141rt8iyomw',
      min_level: 0,
      pvp: false
    }
  ],
  total: '19070'
}

*/
